.sizing:
  - &nav_widget_vars
    height: 50
    padding: 8

  - &page_styles
    <<: !include styles/page_styles.yaml
    pad_top: 50
    pad_bottom: 50

  - &container_styles
    <<: !include styles/container_styles.yaml
    pad_top: 0
    pad_bottom: 0
    pad_left: 6
    pad_right: 6

  - &button_layout
    <<: !include styles/button_layout.yaml
    pad_column: 8
    pad_row: 8

  - &button_widget_vars
    width: 49%
    height: 86

  - &wide_button_widget_vars
    width: 100%
    height: 86

script:
  - id: go_home
    then:
      - lvgl.page.show: ${home_page}

lvgl:
  font: !include
    file: fonts/fonts.yaml
    vars:
      text_sm: 16
      text_md: 20
      text_lg: 24
      text_xl: 32
      text_xxl: 48
      icons_sm: 20
      icons_md: 26
      icons_lg: 34
      icons_xl: 42
      icons_xxl: 50
  default_font: roboto_md
  theme: !include themes/main.yaml
  top_layer:
    widgets:
      - <<: !include { file: widgets/header/widget.yaml, vars: { <<: *nav_widget_vars } }
      - <<: !include { file: widgets/footer/widget.yaml, vars: { <<: *nav_widget_vars } }
      - <<: !include { file: widgets/boot_screen/widget.yaml }
  pages:
    - id: dashboard
      <<: *page_styles
      on_load:
        - lvgl.label.update:
            id: page_title
            text: Dashboard
      widgets: !include { file: widgets/dashboard/widget.yaml }

    - id: solar_graph
      <<: *page_styles
      on_load:
        - lvgl.label.update:
            id: page_title
            text: Solar Power
      widgets: !include { file: widgets/graphs/solar_power_widget.yaml }

    - id: solar_forecast_graph
      <<: *page_styles
      on_load:
        - lvgl.label.update:
            id: page_title
            text: Solar Forecast
      widgets: !include { file: widgets/graphs/solar_forecast_widget.yaml }

packages:
  # header
  header_sensors: !include { file: widgets/header/sensors.yaml }

  # boot screen
  boot_screen_sensors: !include { file: widgets/boot_screen/sensors.yaml }

  # Dashboard sensors
  car_soc_sensor: !include { file: widgets/dashboard/sensors.yaml, vars: {
    uid: car_soc,
    entity_id: sensor.volvo_ex30_mqtt_battery_charge_level,
    label_id: car_soc_value,
    icon: "\uF1B9",
    unit: "%"
  }}

  electricity_rate_sensor: !include { file: widgets/dashboard/sensors.yaml, vars: {
    uid: electricity_rate,
    entity_id: sensor.octopus_energy_electricity_20e5423165_1012685307305_current_rate,
    label_id: electricity_rate_value,
    icon: "\uF0E7",
    unit: "Â£"
  }}

  battery_storage_sensor: !include { file: widgets/dashboard/sensors.yaml, vars: {
    uid: battery_storage,
    entity_id: sensor.battery_storage,
    label_id: battery_storage_value,
    icon: "\uF0084",
    unit: "%"
  }}

  house_load_sensor: !include { file: widgets/dashboard/sensors.yaml, vars: {
    uid: house_load,
    entity_id: sensor.solarman_house_load_power,
    label_id: house_load_value,
    icon: "\uF0100",
    unit: "W"
  }}

  # Weather sensors (placeholder)
  weather_sensors: !include { file: widgets/dashboard/weather_sensors.yaml }

  # Graph sensors
  solar_power_sensor: !include { file: widgets/graphs/solar_power_sensors.yaml }
  solar_forecast_sensor: !include { file: widgets/graphs/solar_forecast_sensors.yaml }
